
# ================================
# NIX CONFIGURATION (LOAD FIRST)
# ================================
export USER=designer
if [ -e ~/.nix-profile/etc/profile.d/nix.sh ]; then
  . ~/.nix-profile/etc/profile.d/nix.sh
fi

# ================================
# SYSTEM TOOLS (only if Nix not active to avoid library conflicts)
# Note: We skip /opt/common and /opt/openroad to prevent ODR violations
# ================================
if [ -z "$NIX_PROFILES" ]; then

export CMAKE_PACKAGE_ROOT_ARGS="$CMAKE_PACKAGE_ROOT_ARGS -D SWIG_ROOT=$TOOLS/common -D Eigen3_ROOT=$TOOLS/common -D GTest_ROOT=$TOOLS/common -D LEMON_ROOT=$TOOLS/common -D spdlog_ROOT=$TOOLS/common -D ortools_ROOT=$TOOLS/common"
# export PATH="$TOOLS/common/bin:$PATH"  # Commented: or-tools conflicts with Nix
# export LD_LIBRARY_PATH="$TOOLS/common/lib64:$TOOLS/common/lib:$LD_LIBRARY_PATH"  # Commented

# ORFS Makefile overwrited variables
export ORFS_DIR=$TOOLS/OpenROAD-flow-scripts
export OPENROAD_EXE=$(command -v openroad)
export YOSYS_EXE=$(command -v yosys)
export YOSYS_CMD=yosys
export OPENSTA_EXE=sta

fi
# End of conditional system tools section

